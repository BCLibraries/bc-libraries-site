<html>
<head>
    <title>Searching</title>
    <meta name="slug" content="search"/>
</head>
<body>
<div>
    <div id="block_search">
        <h2>Begin Your Search Here</h2>

        <div role="tabpanel">

            <!-- Nav tabs -->
            <ul class="nav nav-tabs" role="tablist">
                <li role="presentation" class="active"><a href="#all" aria-controls="all" role="tab" data-toggle="tab">All</a></li>
                <li role="presentation"><a href="#books" aria-controls="books" role="tab" data-toggle="tab">Books</a></li>
                <li role="presentation"><a href="#articles" aria-controls="articles" role="tab" data-toggle="tab">Articles</a></li>
            </ul>

            <!-- Tab panes -->
            <div class="tab-content">
                <div role="tabpanel" class="tab-pane active" id="all">
                    <div class="col-xs-12">
                        <div class="input-group input-group-md">
                            <form method="get" action="/search" id="bcbento-search">
                                <input type="text" id="typeahead" name="any" placeholder="Find articles, books, journals, & more">
                                <span class="input-group-btn">
                                    <button class="btn btn-default" type="submit">
                                        <span class="glyphicon glyphicon-search"></span>
                                    </button>
                                </span>
                            </form>
                        </div>
                    </div>
                </div>
                <div role="tabpanel" class="tab-pane" id="books">
                    <div class="col-xs-12">
                        <div class="input-group input-group-md">
                            <form method="get" action="/search-services/primo-catalog" id="bcbento-search">
                                <input type="text" class="" name="any" placeholder="Find books, media, & more">
                                <span class="input-group-btn">
                                    <button class="btn btn-default" type="submit">
                                        <span class="glyphicon glyphicon-search"></span>
                                    </button>
                                </span>
                            </form>
                        </div>
                    </div>
                </div>
                <div role="tabpanel" class="tab-pane" id="articles">
                    <div class="col-xs-12">
                        <div class="input-group input-group-md">
                            <form method="get" action="/search-services/primo-articles" id="bcbento-search">
                                <input type="text" name="any" placeholder="Find journal articles">
                                <span class="input-group-btn">
                                    <button class="btn btn-default" type="submit">
                                        <span class="glyphicon glyphicon-search"></span>
                                    </button>
                                </span>
                            </form>
                        </div>
                    </div>
                </div>
            </div>

        </div>

    </div>


    <div id="bentoboxresults">

        <div id="all-results">

            <!-- Secondary results box. -->
            <div id="secondary">
                <div id="articles-results" class="result-container">
                    <h3>Articles</h3>
                </div>
            </div>

            <!-- The primary results box. -->
            <div id="primary">
                <div id="catalog-results" class="result-container">
                    <h3>Catalog</h3>
                </div>
            </div>

            <!-- Tertiary results box.-->
            <div id="tertiary">
                <div id="librarians-results" class="result-container librarians">
                    <h3>Librarians</h3>
                </div>
                <div id="guides-results" class="result-container guides">
                    <h3>Subject guides</h3>
                </div>
            </div>

        </div>

    </div>
    <script src="/theme/bcbento/js/handlebars-v3.0.0.js"></script>
    <script src="/theme/bcbento/js/search.js"></script>


    <!-- Search result templates -->
    <script id="librarians-template" type="text/x-template">
        <ul>
            {{#.}}
            <li>
                <img src="//{{image}}" alt="picture of {{name}}">

                <div class="librarian-info">
                    <h4 class="librarian-name">{{name}}</h4>
                    {{#subjects}}
                    <div class="librarian-subject">{{term}}</div>
                    {{/subjects}}
                </div>
            </li>
            {{/.}}
        </ul>
    </script>

    <script id="guides-template" type="text/x-template">
        <ul>
            {{#.}}
            <li>
                <div><a href="{{url}}">{{title}}</a></div>
                <div class="guide-description">{{description}}</div>
            </li>
            {{/.}}
        </ul>

    </script>

    <script id="catalog-template" type="text/x-template">

        <div class="more-results-link">
            <a href="{{search_link}}">
                see all {{total_results}} results…
            </a>
        </div>

        <ul id="catalog-results">

            {{#items}}
            <li class="bento-result">

                <div class="catalog-text{{#if covers.[0]}} has-cover{{/if}}">

                    <a href="{{link}}" class="title">
                        {{truncate '100' title}}
                    </a>

                    {{date}}

                    <div class="catalog-metadata">
                        {{#if creator}}
                        <div class="creator">
                            {{truncate '40' creator}}
                        </div>
                        {{/if}}

                        {{^creator}}
                        {{#if contributors.[0]}}
                        <div class="creator">
                            {{truncate '40' contributors.[0]}}
                        </div>
                        {{/if}}
                        {{/creator}}

                        {{^creator}}
                        {{^contributor}}
                        <div class="publisher">
                            {{publisher}} {{date}}
                        </div>
                        {{/contributor}}
                        {{/creator}}

                        <div class="type">{{type}}</div>
                        <ul class="available-items">
                            {{#avail}}
                            <li class="item-info">
                                <span class="library">{{library}}</span>
                                <span class="callno">{{call_number}}</span>
                                <span class="availability">{{availability}}</span>
                            </li>
                            {{/avail}}
                        </ul>
                    </div>
                </div>

                {{#if covers.[0]}}
                <img src="{{covers.[0]}}" class="cover-image">
                {{/if}}

            </li>
            {{/items}}
        </ul>

    </script>

    <script id="articles-template" type="text/x-template">
        <div class="more-results-link">
            <a href="{{search_link}}">
                see all {{total_results}} results…
            </a>
        </div>

        <ul>
            {{#items}}
            <li>

                <a href="{{link}}" class="title">
                    {{truncate '100' title}}
                </a>

                {{date}}

                {{#if creator}}
                <div class="creator">{{truncate '80' creator}}</div>
                {{/if}}
                <div class="publisher">{{part_of}}</div>
                <div class="source">{{source}}</div>
                <div class="type">{{type}}</div>
            </li>
            {{/items}}
        </ul>
    </script>
</div>

<!-- Control search tab switch. -->
<script>
    $(function () {
        console.log('loaded');
        $('#block_search *[role=presentation]').click(
                function() {
                    var current_text = $('#block_search .tab-pane.active input[type=text]').val();
                    $('#block_search .tab-pane input[type=text]').val(current_text);
                }
        );
    });
</script>

</body>
</html>
