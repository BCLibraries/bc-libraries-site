{% extends "base.html" %}

{% block title %}Home{% endblock %}

{% block pagestyles %}
<link rel="stylesheet" href="/theme/css/stories.css" />
{% endblock %}

{% block content %}

{%include 'homepage/header.html' %}

<div id="main-body" role="main" tabindex="-1">
    <!-- DB RG HOURS BOX START -->
    <div class="container" id="db-rg-hours">
        <div class="row nobottom">
            {% include 'homepage/databases.html' %}

            {% include 'homepage/start-research.html' %}

            {% include 'homepage/story-box.html' %}
        </div>
    </div>
    <!-- DB RG HOURS BOX END -->

    {% include 'homepage/quick-links.html' %}

    {% include 'homepage/news-row.html' %}

    {% include 'homepage/digital-scholarship-highlight.html' %}

    {% include 'homepage/scholarship-at-bc.html' %}

    {% include 'homepage/exhibits-highlight.html' %}

    {% include 'homepage/facpub-highlight.html' %}

    {% include 'homepage/special-collections-highlight.html' %}
</div>
<!--
    Temporary location for inactive scripts
-->

<!--script type="text/javascript" src="/theme/js/libraryinfo.js"></script-->

<!-- /#contentinfo -->
<!-- MEGA MENU SCRIPT -->
<!--script type="text/javascript" src="/theme/js/megamenu.js"></script-->

<!-- Control search tab switch. -->
<!--script>
$(function () {
    $('#block_search *[role=presentation]').click(
        function() {
            var current_text = $('#block_search .tab-pane.active input[type=text]').val();
            $('#block_search .tab-pane input[type=text]').val(current_text);
        }
    );
});
</script-->

<!-- Script to block spam-bots. Requires JQuery. -->

<!-- JS for expanding search bar
<script src="/theme/js/classie.js"></script>
<script src="/theme/js/uisearch.js"></script>
<script>
    new UISearch( document.getElementById( 'sb-search' ) );
</script>-->

{% endblock %}

{% block pagescripts %}
<script type="text/javascript" src="/theme/js/story-box.js"></script>
<script type="text/javascript" src="/theme/bcbento/js/typeahead.bundle.min.js"></script>
<script type="text/javascript" src="/theme/bcbento/js/bclib-typeahead.js"></script>
<script type="text/javascript">
    // Various glue scripts for the front page.
    (function () {
        function run_on_ready(fn) {
            if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
                fn();
            } else {
                document.addEventListener('DOMContentLoaded', fn);
            }
        }

        function listenForTypeahead() {
            $('#search-panel').on('typeahead:selected', function (evt, data) {
                $('#search-panel form').submit();
            });
        }

        function makeQuickLinkBoxesClickable() {
            var linkboxes = document.querySelectorAll('.quick-link-block');
            linkboxes.forEach(function (el) {
                el.addEventListener('click', function (evt) {
                    console.log(evt);
                    window.location = el.querySelector('a').href;
                });
            });
        }

        run_on_ready(listenForTypeahead);
        run_on_ready(makeQuickLinkBoxesClickable);
    })();
</script>
{% endblock %}
